!function(e){var o=0,t=0,a=function(){return t++,"materialize-lean-overlay-"+t};e.fn.extend({openModal:function(t){var i=e("body"),n=i.innerWidth();i.css("overflow","hidden"),i.width(n);var c={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%"},l=e(this);l.hasClass("open")||(overlayID=a(),$overlay=e('<div class="lean-overlay"></div>'),lStack=++o,$overlay.attr("id",overlayID).css("z-index",1e3+2*lStack),l.data("overlay-id",overlayID).css("z-index",1e3+2*lStack+1),l.addClass("open"),e("body").append($overlay),t=e.extend(c,t),t.dismissible&&($overlay.click(function(){l.closeModal(t)}),e(document).on("keyup.leanModal"+overlayID,function(e){27===e.keyCode&&l.closeModal(t)})),l.find(".modal-close").on("click.close",function(){l.closeModal(t)}),$overlay.css({display:"block",opacity:0}),l.css({display:"block",opacity:0}),$overlay.velocity({opacity:t.opacity},{duration:t.in_duration,queue:!1,ease:"easeOutCubic"}),l.data("associated-overlay",$overlay[0]),l.hasClass("bottom-sheet")?l.velocity({bottom:"0",opacity:1},{duration:t.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof t.ready&&t.ready()}}):(e.Velocity.hook(l,"scaleX",.7),l.css({top:t.starting_top}),l.velocity({top:"10%",opacity:1,scaleX:"1"},{duration:t.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof t.ready&&t.ready()}})))}}),e.fn.extend({closeModal:function(t){var a={out_duration:250,complete:void 0},i=e(this),n=i.data("overlay-id"),c=e("#"+n);i.removeClass("open"),t=e.extend(a,t),e("body").css({overflow:"",width:""}),i.find(".modal-close").off("click.close"),e(document).off("keyup.leanModal"+n),c.velocity({opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutQuart"}),i.hasClass("bottom-sheet")?i.velocity({bottom:"-100%",opacity:0},{duration:t.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){c.css({display:"none"}),"function"==typeof t.complete&&t.complete(),c.remove(),o--}}):i.velocity({top:t.starting_top,opacity:0,scaleX:.7},{duration:t.out_duration,complete:function(){e(this).css("display","none"),"function"==typeof t.complete&&t.complete(),c.remove(),o--}})}}),e.fn.extend({leanModal:function(o){return this.each(function(){var t={starting_top:"4%"},a=e.extend(t,o);e(this).click(function(o){a.starting_top=(e(this).offset().top-e(window).scrollTop())/1.15;var t=e(this).attr("href")||"#"+e(this).data("target");e(t).openModal(a),o.preventDefault()})})}})}(jQuery);